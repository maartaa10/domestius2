<div class="add-animal-container">
  <h2>Afegir Nou Animal</h2>
  <form (ngSubmit)="onSubmit()" #animalForm="ngForm">
    <div class="form-group">
      <label for="nom">Nom</label>
      <input
        type="text"
        id="nom"
        name="nom"
        [(ngModel)]="animal.nom"
        required
      />
    </div>
    <div class="form-group">
      <label for="edat">Edat</label>
      <input
        type="number"
        id="edat"
        name="edat"
        [(ngModel)]="animal.edat"
        required
      />
    </div>
    <div class="form-group">
      <label for="especie">Espècie</label>
      <input
        type="text"
        id="especie"
        name="especie"
        [(ngModel)]="animal.especie"
        required
      />
    </div>
    <div class="form-group">
      <label for="raça">Raça</label>
      <input
        type="text"
        id="raça"
        name="raça"
        [(ngModel)]="animal['raça']"
      />
    </div>
    <div class="form-group">
      <label for="descripcio">Descripció</label>
      <textarea
        id="descripcio"
        name="descripcio"
        [(ngModel)]="animal.descripcio"
      ></textarea>
    </div>
    <div class="form-group">
      <label for="estat">Estat</label>
      <select id="estat" name="estat" [(ngModel)]="animal.estat" required>
        <option value="Disponible">Disponible</option>
        <option value="Adoptado">Adoptat</option>
        <option value="En Adopción">En Adopció</option>
        <option value="Reservado">Reservat</option>
        <option value="En Tratamiento">En Tractament</option>
      </select>
    </div>
    <div class="form-group">
      <label for="imatge">Imatge</label>
      <input
        type="file"
        id="imatge"
        name="imatge"
        (change)="onFileSelected($event)"
        accept="image/*"
      />
    </div>
    <div class="form-group" hidden>
      <label for="protectora">Protectora</label>
      <input
        type="text"
        id="protectora"
        name="protectora"
        [value]="getProtectoraName(animal.protectora_id)"
        readonly
        class="form-control"
      />
    </div>
    <div class="form-group">
      <label for="ubicacionNombre">Nom de la ubicació</label>
      <input
        type="text"
        id="ubicacionNombre"
        name="ubicacionNombre"
        [(ngModel)]="ubicacion.nombre"
        placeholder="Exemple: Barcelona"
        required
      />
    </div>
    
    <div class="form-group">
      <label for="latitud">Latitud</label>
      <input
        type="text"
        id="latitud"
        name="latitud"
        [(ngModel)]="ubicacion.latitud"
        placeholder="Exemple: 41.3754960"
        required
      />
    </div>
    
    <div class="form-group">
      <label for="longitud">Longitud</label>
      <input
        type="text"
        id="longitud"
        name="longitud"
        [(ngModel)]="ubicacion.longitud"
        placeholder="Exemple: 2.1768060"
        required
      />
    </div>
    <div class="form-group">
      <label>
        <input type="checkbox" [(ngModel)]="crearPublicacio" name="crearPublicacio" />
        Crear publicació associada
      </label>
    </div>

    <div *ngIf="crearPublicacio" class="form-group">
      <label for="titulo">Títol de la publicació</label>
      <input
        type="text"
        id="titulo"
        name="titulo"
        [(ngModel)]="publicacioTitulo"
        placeholder="Escriu el títol de la publicació (ex. Adopció, Perdut, etc.)"
        required
      />
    </div>
    
    <div *ngIf="crearPublicacio" class="form-group">
      <label for="detalls">Detalls de la publicació</label>
      <textarea
        id="detalls"
        name="detalls"
        [(ngModel)]="publicacioDetalls"
        placeholder="Escriu els detalls de la publicació..."
      ></textarea>
    </div>

    <button type="submit" class="action-button">Afegir Animal</button>
  </form>
</div>